<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒªãƒ–ã‚±ãƒ¼ã‚¸é€£å‹•ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ­ã‚°</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background:#111; color:#eee;
  margin:0; padding:20px;
  line-height:1.7; overflow-x:hidden;
}
h1 { 
  text-align:center; 
  color:#ff0; 
  font-size:1.4em; 
  margin-bottom:10px; 
}

/* ğŸŒŠ é€²æ—ãƒãƒ¼ã‚³ãƒ³ãƒ†ãƒŠ */
.progress-container {
  background:#333;
  border-radius:10px;
  overflow:hidden;
  height:20px;
  margin:15px 0 25px 0;
}

/* ğŸŒŠ å‘¼å¸ã™ã‚‹æ³¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.progress-bar {
  height:100%;
  width:0%;
  text-align:center;
  font-size:0.8em;
  color:#fff;
  transition:width 0.5s ease-in-out;
  background: linear-gradient(90deg, #ff6600, #ffaa33, #ff6600);
  background-size: 200% 100%;
  animation: wave 3s ease-in-out infinite;
  box-shadow: 0 0 10px rgba(255,165,0,0.4);
  position: relative;
  overflow: hidden;
}

@keyframes wave {
  0% { background-position: 0 0; }
  50% { background-position: 100% 0; }
  100% { background-position: 0 0; }
}

/* âœ¨ é”æˆæ™‚ã«å…‰ãŒèµ°ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.progress-bar::after {
  content: "";
  position: absolute;
  top: 0; left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(120deg, transparent, rgba(255,255,200,0.8), transparent);
  transform: skewX(-20deg);
  animation: none;
}

.progress-bar.glow::after {
  animation: shine 1.5s ease-in-out;
}

@keyframes shine {
  0% { left: -100%; }
  50% { left: 0%; opacity: 1; }
  100% { left: 100%; opacity: 0; }
}

/* ==== ãƒ‰ãƒªãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŸºæœ¬ãƒ‡ã‚¶ã‚¤ãƒ³ ==== */
section { 
  background:#222; 
  border-radius:8px; 
  padding:12px 16px; 
  margin-bottom:12px; 
  position:relative; 
}
summary { 
  font-weight:bold; 
  color:#ff0; 
  font-size:1.1em; 
  cursor:pointer; 
}
img { 
  width:100%; 
  border-radius:8px; 
  margin-top:8px; 
}
button.check { 
  position:absolute; 
  top:10px; right:12px; 
  background:#444; color:#fff; 
  border:none; border-radius:6px; 
  padding:4px 8px; font-size:0.9em; 
  cursor:pointer; 
}
button.check.done { background:#0a0; color:#fff; }
#reset { 
  display:block; 
  width:100%; 
  background:#900; color:#fff; 
  font-size:1em; padding:10px; 
  border:none; border-radius:6px; 
  margin-top:25px; cursor:pointer; 
}
.log { color:#0f0; font-size:0.9em; margin-top:8px; }
.last { color:#0ff; font-size:0.85em; margin-top:3px; }
footer { text-align:center; margin-top:25px; color:#888; font-size:0.85em; }

/* ğŸ¨ æœˆã”ã¨ã®èƒŒæ™¯ã‚«ãƒ©ãƒ¼ï¼ˆå¹´é–“ãƒ­ã‚°ç”¨ï¼‰ */
.month-1 { background:#1e2b50; }
.month-2 { background:#203d70; }
.month-3 { background:#275d80; }
.month-4 { background:#2b8070; }
.month-5 { background:#3a9c50; }
.month-6 { background:#64a630; }
.month-7 { background:#a88f20; }
.month-8 { background:#b87333; }
.month-9 { background:#a64550; }
.month-10{ background:#804070; }
.month-11{ background:#503e8a; }
.month-12{ background:#3a3f7a; }

/* ğŸ‰ é”æˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
#achieveMessage {
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.8);
  color: #ff0;
  font-size: 1.3em;
  padding: 15px 25px;
  border-radius: 10px;
  opacity: 0;
  transition: opacity 0.5s;
  z-index: 9999;
  pointer-events: none;
  text-align: center;
}
</style>
</head>

  <body>

<h1>ãƒªãƒ–ã‚±ãƒ¼ã‚¸é€£å‹•ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ­ã‚°</h1>

<!-- ğŸŒŠ é€²æ—ãƒãƒ¼ -->
<div class="progress-container">
  <div class="progress-bar" id="progressBar">ä»Šé€± 0 / 2 å›</div>
</div>

<!-- ğŸ‰ é”æˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
<div id="achieveMessage">ğŸ‰ ä»Šé€±ã®ç›®æ¨™é”æˆï¼ ğŸ‰</div>

<!-- ==== å„ãƒ‰ãƒªãƒ« ==== -->

<section>
<button class="check" onclick="addLog(this)">â–¡ å®Ÿæ–½</button>
<details>
<summary>â‘  ãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒ‡ãƒƒãƒ‰ãƒã‚°</summary>
<img src="images/deadbug-1.jpg" alt="ãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒ‡ãƒƒãƒ‰ãƒã‚°">
<p><b>ç›®çš„ï¼š</b>éª¨ç›¤ã¨è‚‹éª¨ã®æ³¢å‹•é€£å‹•ã§å››è‚¢ã‚’åˆ¶å¾¡ã™ã‚‹ã€‚</p>
<p class="log">ä»Šæœˆã®å®Ÿæ–½æ—¥ï¼š<span id="log1"></span></p>
<p class="last">æœ€çµ‚å®Ÿæ–½æ—¥ï¼š<span id="last1">â€•</span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">â–¡ å®Ÿæ–½</button>
<details>
<summary>â‘¡ ãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒã‚¦ãƒ³ã‚¹</summary>
<img src="images/bounce-1.jpg" alt="ãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒã‚¦ãƒ³ã‚¹">
<p><b>ç›®çš„ï¼š</b>è‚‹éª¨ã®åœ§ç¸®åå°„ã§ä¸Šä¸‹ã®ãƒãƒåå¿œã‚’é«˜ã‚ã‚‹ã€‚</p>
<p class="log">ä»Šæœˆã®å®Ÿæ–½æ—¥ï¼š<span id="log2"></span></p>
<p class="last">æœ€çµ‚å®Ÿæ–½æ—¥ï¼š<span id="last2">â€•</span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">â–¡ å®Ÿæ–½</button>
<details>
<summary>â‘¢ ã‚¹ãƒ†ãƒƒãƒ—å°ãƒ’ãƒƒãƒ—ãƒ‰ãƒªãƒ•ãƒˆ</summary>
<img src="images/hipdrift-1.jpg" alt="ã‚¹ãƒ†ãƒƒãƒ—å°ãƒ’ãƒƒãƒ—ãƒ‰ãƒªãƒ•ãƒˆ">
<p><b>ç›®çš„ï¼š</b>éª¨ç›¤ã®æ»‘èµ°ã‚’æ»‘ã‚‰ã‹ã«ã—ã€é‡å¿ƒç§»å‹•ã‚’åˆ¶å¾¡ã€‚</p>
<p class="log">ä»Šæœˆã®å®Ÿæ–½æ—¥ï¼š<span id="log3"></span></p>
<p class="last">æœ€çµ‚å®Ÿæ–½æ—¥ï¼š<span id="last3">â€•</span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">â–¡ å®Ÿæ–½</button>
<details>
<summary>â‘£ ãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒ—ãƒ¬ã‚¹</summary>
<img src="images/press-1.jpg" alt="ãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒ—ãƒ¬ã‚¹">
<p><b>ç›®çš„ï¼š</b>è‚‹éª¨åœ§ç¸®ã«ã‚ˆã‚‹ä½“å¹¹ã‹ã‚‰ã®åŠ›ä¼é”ã‚’å­¦ã¶ã€‚</p>
<p class="log">ä»Šæœˆã®å®Ÿæ–½æ—¥ï¼š<span id="log4"></span></p>
<p class="last">æœ€çµ‚å®Ÿæ–½æ—¥ï¼š<span id="last4">â€•</span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">â–¡ å®Ÿæ–½</button>
<details>
<summary>â‘¤ MBãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒªãƒ¼ãƒ‰ãƒ»ãƒ‰ãƒªãƒ«</summary>
<img src="images/mblead-1.jpg" alt="MBãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒªãƒ¼ãƒ‰ãƒ»ãƒ‰ãƒªãƒ«">
<p><b>ç›®çš„ï¼š</b>è‚‹éª¨ä¸»å°ã§æ³¢ã®ã‚ˆã†ãªå‡ºåŠ›ä¼é”ã‚’ä½“å¾—ã™ã‚‹ã€‚</p>
<p class="log">ä»Šæœˆã®å®Ÿæ–½æ—¥ï¼š<span id="log5"></span></p>
<p class="last">æœ€çµ‚å®Ÿæ–½æ—¥ï¼š<span id="last5">â€•</span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">â–¡ å®Ÿæ–½</button>
<details>
<summary>â‘¥ WBãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒªãƒ¼ãƒ‰ãƒ»ãƒ‰ãƒªãƒ«</summary>
<img src="images/wblead-1.jpg" alt="WBãƒªãƒ–ã‚±ãƒ¼ã‚¸ãƒ»ãƒªãƒ¼ãƒ‰ãƒ»ãƒ‰ãƒªãƒ«">
<p><b>ç›®çš„ï¼š</b>ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒƒã‚°ã®æµä½“æŠµæŠ—ã¨èº«ä½“æ³¢å‹•ã‚’åŒæœŸã€‚</p>
<p class="log">ä»Šæœˆã®å®Ÿæ–½æ—¥ï¼š<span id="log6"></span></p>
<p class="last">æœ€çµ‚å®Ÿæ–½æ—¥ï¼š<span id="last6">â€•</span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">â–¡ å®Ÿæ–½</button>
<details>
<summary>â‘¦ BIG3ï¼ˆã‚¹ã‚¯ãƒ¯ãƒƒãƒˆï¼ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆï¼ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹ï¼‰</summary>
<img src="images/big3-1.jpg" alt="BIG3 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°">
<p><b>ç›®çš„ï¼š</b>å…¨èº«å‡ºåŠ›ã‚’å®‰å®šã•ã›ã€ãƒªãƒ–ã‚±ãƒ¼ã‚¸é€£å‹•ã‚’çµ±åˆã€‚</p>
<p class="log">ä»Šæœˆã®å®Ÿæ–½æ—¥ï¼š<span id="log7"></span></p>
<p class="last">æœ€çµ‚å®Ÿæ–½æ—¥ï¼š<span id="last7">â€•</span></p>
</details>
</section>

<!-- ğŸ”„ æ‰‹å‹•ãƒªã‚»ãƒƒãƒˆ -->
<button id="reset" onclick="resetAll()">ğŸ”„ å…¨ãƒªã‚»ãƒƒãƒˆ</button>

<!-- ğŸ“… å¹´é–“ãƒ­ã‚°è¡¨ç¤º -->
<h2 style="color:#ff0; margin-top:40px;">å¹´é–“ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ­ã‚°</h2>
<div id="yearlyLog" style="display:grid; grid-template-columns:repeat(13,1fr); gap:4px; margin-top:10px;"></div>
<p id="yearRate" style="color:#0ff; margin-top:10px; text-align:center;"></p>

<footer>Â©2025 adjustment-labï½œãƒªãƒ–ã‚±ãƒ¼ã‚¸é€£å‹•ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ­ã‚°</footer>

<script>
// ===== å®šæ•° =====
const monthKey = new Date().getFullYear() + "-" + ("0"+(new Date().getMonth()+1)).slice(-2);
const drills = 7;
const weekKey = getWeekKey();

// ===== åˆæœŸãƒ­ãƒ¼ãƒ‰ =====
window.onload = () => {
  for(let i=1; i<=drills; i++){
    const logData = JSON.parse(localStorage.getItem(`log${i}_${monthKey}`)) || [];
    const lastDate = localStorage.getItem(`last${i}_${monthKey}`) || "â€•";
    document.getElementById(`log${i}`).textContent = logData.join("ãƒ»");
    document.getElementById(`last${i}`).textContent = lastDate;
  }
  cleanOldMonths();
  cleanOldWeeks();
  updateProgressBar();
  updateYearlyLog();
};

// ===== å®Ÿæ–½ãƒœã‚¿ãƒ³ =====
function addLog(btn){
  const section = btn.parentElement;
  const id = Array.from(document.querySelectorAll("section")).indexOf(section) + 1;
  const today = new Date();
  const dateStr = ("0"+(today.getMonth()+1)).slice(-2)+"/"+("0"+today.getDate()).slice(-2);
  let logData = JSON.parse(localStorage.getItem(`log${id}_${monthKey}`)) || [];

  if(!logData.includes(dateStr)){
    logData.push(dateStr);
    localStorage.setItem(`log${id}_${monthKey}`, JSON.stringify(logData));
    document.getElementById(`log${id}`).textContent = logData.join("ãƒ»");
    localStorage.setItem(`last${id}_${monthKey}`, dateStr);
    document.getElementById(`last${id}`).textContent = dateStr;

    btn.textContent = "âœ” å®Œäº†";
    btn.classList.add("done");

    // âœ…é€±ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°
    let weekCount = parseInt(localStorage.getItem(`weekCount_${weekKey}`) || "0");
    weekCount++;
    localStorage.setItem(`weekCount_${weekKey}`, weekCount);
    updateProgressBar();
  } 
  else {
    if(confirm("ã“ã®æ—¥ã®è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){
      logData = logData.filter(x=>x!==dateStr);
      localStorage.setItem(`log${id}_${monthKey}`, JSON.stringify(logData));
      document.getElementById(`log${id}`).textContent = logData.join("ãƒ»");
      const newLast = logData.length > 0 ? logData[logData.length-1] : "â€•";
      localStorage.setItem(`last${id}_${monthKey}`, newLast);
      document.getElementById(`last${id}`).textContent = newLast;
      btn.textContent = "â–¡ å®Ÿæ–½";
      btn.classList.remove("done");
    }
  }
}

// ===== é€²æ—ãƒãƒ¼æ›´æ–° =====
function updateProgressBar(){
  const weekCount = parseInt(localStorage.getItem(`weekCount_${weekKey}`) || "0");
  const bar = document.getElementById("progressBar");
  const percent = Math.min((weekCount/2)*100, 100);
  bar.style.width = percent + "%";
  bar.textContent = `ä»Šé€± ${Math.min(weekCount,2)} / 2 å›`;

  // âœ…è‰²å¤‰åŒ–ã¨ç™ºå…‰
  if(percent >= 100){
    bar.style.background = "linear-gradient(90deg, #00ff55, #33ff99, #00ff55)";
    bar.style.boxShadow = "0 0 20px rgba(0,255,100,0.6)";
  } else {
    bar.style.background = "linear-gradient(90deg, #ff6600, #ffaa33, #ff6600)";
    bar.style.boxShadow = "0 0 10px rgba(255,165,0,0.4)";
  }

  // ğŸ‰ é”æˆæ™‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  if(percent >= 100 && !localStorage.getItem(`achieved_${weekKey}`)){
    localStorage.setItem(`achieved_${weekKey}`, "true");
    showAchievement();
  }
}

// ===== é”æˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ =====
function showAchievement(){
  const msg = document.getElementById("achieveMessage");
  msg.style.opacity = 1;
  msg.style.transform = "translate(-50%, -50%) scale(1.1)";
  setTimeout(()=>{
    msg.style.opacity = 0;
    msg.style.transform = "translate(-50%, -50%) scale(1)";
  }, 2200);
  updateYearlyLog();
}

// ===== å¹´é–“ãƒ­ã‚°ï¼ˆæ›´æ–°å‡¦ç†ï¼‰ =====
function updateYearlyLog(){
  const year = new Date().getFullYear();
  const container = document.getElementById("yearlyLog");
  container.innerHTML = "";
  let achievedWeeks = 0;

  for(let w=1; w<=52; w++){
    const weekId = `${year}-W${w}`;
    const box = document.createElement("div");
    box.className = `month-${Math.ceil(w / 4.3)}`;
    box.style.width = "100%";
    box.style.aspectRatio = "1 / 1";
    box.style.borderRadius = "3px";
    box.style.display = "flex";
    box.style.alignItems = "center";
    box.style.justifyContent = "center";
    box.style.fontSize = "0.7em";
    box.textContent = w.toString().padStart(2,"0");

    if(localStorage.getItem(`achieved_${weekId}`)){
      box.style.border = "2px solid #0f0";
      box.style.color = "#fff";
      achievedWeeks++;
    } else {
      box.style.border = "1px solid #333";
      box.style.color = "#bbb";
      box.style.opacity = 0.6;
    }

    container.appendChild(box);
  }

  const rate = ((achievedWeeks/52)*100).toFixed(1);
  document.getElementById("yearRate").textContent = 
    `å¹´é–“é”æˆç‡ï¼š${rate}%ï¼ˆ${achievedWeeks}/52é€±ï¼‰`;
}

// ===== é€±ã‚­ãƒ¼ç”Ÿæˆ =====
function getWeekKey(){
  const today = new Date();
  const onejan = new Date(today.getFullYear(),0,1);
  const week = Math.ceil((((today - onejan) / 86400000) + onejan.getDay()+1) / 7);
  return `${today.getFullYear()}-W${week}`;
}

// ===== å¤ã„ãƒ‡ãƒ¼ã‚¿è‡ªå‹•å‰Šé™¤ =====
function cleanOldMonths(){
  const nowMonth = monthKey;
  Object.keys(localStorage).forEach(k=>{
    if((k.startsWith("log") || k.startsWith("last")) && !k.includes(nowMonth)){
      localStorage.removeItem(k);
    }
  });
}

function cleanOldWeeks(){
  const nowWeek = weekKey;
  Object.keys(localStorage).forEach(k=>{
    if((k.startsWith("weekCount") || k.startsWith("achieved")) && !k.includes(nowWeek)){
      localStorage.removeItem(k);
    }
  });
}

// ===== æ‰‹å‹•ãƒªã‚»ãƒƒãƒˆ =====
function resetAll(){
  if(confirm("å…¨ã¦ã®å±¥æ­´ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){
    Object.keys(localStorage).forEach(k=>{
      if(k.startsWith("log") || k.startsWith("last") || k.startsWith("weekCount") || k.startsWith("achieved"))
        localStorage.removeItem(k);
    });
    for(let i=1; i<=drills; i++){
      document.getElementById(`log${i}`).textContent = "";
      document.getElementById(`last${i}`).textContent = "â€•";
      const btn = document.querySelectorAll(".check")[i-1];
      btn.textContent = "â–¡ å®Ÿæ–½";
      btn.classList.remove("done");
    }
    updateProgressBar();
    updateYearlyLog();
  }
}
</script>
</body>
</html>
