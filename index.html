<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>リブケージ連動トレーニングログ</title>
<style>
body { font-family: system-ui, sans-serif; background:#111; color:#eee; margin:0; padding:20px; line-height:1.7; }
h1 { text-align:center; color:#ff0; font-size:1.4em; margin-bottom:20px; }
section { background:#222; border-radius:8px; padding:12px 16px; margin-bottom:12px; position:relative; }
summary { font-weight:bold; color:#ff0; font-size:1.1em; cursor:pointer; }
img { width:100%; border-radius:8px; margin-top:8px; }
button.check { position:absolute; top:10px; right:12px; background:#444; color:#ff0; border:none; border-radius:6px; padding:4px 8px; font-size:0.9em; cursor:pointer; }
button.check.done { background:#0a0; color:#fff; }
#reset { display:block; width:100%; background:#900; color:#fff; font-size:1em; padding:10px; border:none; border-radius:6px; margin-top:25px; cursor:pointer; }
.log { color:#0f0; font-size:0.9em; margin-top:8px; }
footer { text-align:center; margin-top:25px; color:#888; font-size:0.85em; }
</style>
</head>
<body>

<h1>リブケージ連動トレーニングログ</h1>

<!-- ==== 各ドリル ==== -->
<section>
<button class="check" onclick="addLog(this)">✅</button>
<details>
<summary>① リブケージ・デッドバグ</summary>
<img src="images/deadbug-1.jpg" alt="リブケージ・デッドバグ">
<p><b>目的：</b>骨盤と肋骨の波動連動で四肢を制御する。</p>
<p class="log">今月の実施日：<span id="log1"></span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">✅</button>
<details>
<summary>② リブケージ・バウンス</summary>
<img src="images/bounce-1.jpg" alt="リブケージ・バウンス">
<p><b>目的：</b>肋骨の圧縮反射で上下のバネ反応を高める。</p>
<p class="log">今月の実施日：<span id="log2"></span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">✅</button>
<details>
<summary>③ ステップ台ヒップドリフト</summary>
<img src="images/hipdrift-1.jpg" alt="ステップ台ヒップドリフト">
<p><b>目的：</b>骨盤の滑走を滑らかにし、重心移動を制御。</p>
<p class="log">今月の実施日：<span id="log3"></span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">✅</button>
<details>
<summary>④ リブケージ・プレス</summary>
<img src="images/press-1.jpg" alt="リブケージ・プレス">
<p><b>目的：</b>肋骨圧縮で体幹から力を伝える。</p>
<p class="log">今月の実施日：<span id="log4"></span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">✅</button>
<details>
<summary>⑤ MBリブケージ・リード・ドリル</summary>
<img src="images/mblead-1.jpg" alt="MBリブケージ・リード・ドリル">
<p><b>目的：</b>肋骨主導で波の伝達を学ぶ。</p>
<p class="log">今月の実施日：<span id="log5"></span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">✅</button>
<details>
<summary>⑥ WBリブケージ・リード・ドリル</summary>
<img src="images/wblead-1.jpg" alt="WBリブケージ・リード・ドリル">
<p><b>目的：</b>ウォーターバッグの流れと身体の波動を一致させる。</p>
<p class="log">今月の実施日：<span id="log6"></span></p>
</details>
</section>

<section>
<button class="check" onclick="addLog(this)">✅</button>
<details>
<summary>⑦ BIG3（スクワット／デッドリフト／ベンチプレス）</summary>
<img src="images/big3-1.jpg" alt="BIG3 トレーニング">
<p><b>目的：</b>全身出力を安定させ、リブケージ連動を統合する。</p>
<p class="log">今月の実施日：<span id="log7"></span></p>
</details>
</section>

<button id="reset" onclick="resetAll()">🔄 全リセット</button>

<footer>©2025 adjustment-lab｜リブケージ連動トレーニングログ</footer>

<script>
const monthKey = new Date().getFullYear() + "-" + ("0"+(new Date().getMonth()+1)).slice(-2); // 例: 2025-10
const drills = 7;

// 初期表示
window.onload = () => {
  for(let i=1; i<=drills; i++){
    const logData = JSON.parse(localStorage.getItem(`log${i}_${monthKey}`)) || [];
    document.getElementById(`log${i}`).textContent = logData.join("・");
  }
  cleanOldMonths();
};

// ✅ボタン押下 → 日付追加
function addLog(btn){
  const section = btn.parentElement;
  const id = Array.from(document.querySelectorAll("section")).indexOf(section) + 1;
  const today = new Date();
  const dateStr = ("0"+(today.getMonth()+1)).slice(-2)+"/"+("0"+today.getDate()).slice(-2);
  let logData = JSON.parse(localStorage.getItem(`log${id}_${monthKey}`)) || [];

  if(!logData.includes(dateStr)){
    logData.push(dateStr);
    localStorage.setItem(`log${id}_${monthKey}`, JSON.stringify(logData));
    document.getElementById(`log${id}`).textContent = logData.join("・");
  }
}

// 月切り替え時に自動リセット（前月分削除）
function cleanOldMonths(){
  const nowMonth = monthKey;
  Object.keys(localStorage).forEach(k=>{
    if(k.startsWith("log") && !k.includes(nowMonth)){
      localStorage.removeItem(k);
    }
  });
}

// 手動リセット
function resetAll(){
  if(confirm("全ての履歴を削除しますか？")){
    Object.keys(localStorage).forEach(k=>{
      if(k.startsWith("log")) localStorage.removeItem(k);
    });
    for(let i=1; i<=drills; i++){
      document.getElementById(`log${i}`).textContent = "";
    }
  }
}
</script>

</body>
</html>
